---
title: 在 Azure IoT Central 应用程序中创建并运行作业 | Microsoft Docs
description: Azure IoT Central 作业允许批量设备管理功能，例如更新设备属性、设置或执行命令。
ms.service: iot-central
services: iot-central
author: sarahhubbard
ms.author: v-yiso
origin.date: 07/08/2019
ms.date: 12/16/2019
ms.topic: conceptual
manager: peterpr
ms.openlocfilehash: 8aabd551c32f8235e2ed5d987f658f67162c605e
ms.sourcegitcommit: 6ffa4d50cee80c7c0944e215ca917a248f2a4bcd
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/06/2019
ms.locfileid: "74883309"
---
# <a name="create-and-run-a-job-in-your-azure-iot-central-application"></a>在 Azure IoT Central 应用程序中创建并运行作业

可以使用 Microsoft Azure IoT Central 通过作业大规模地管理连接的设备。 使用这些作业可以批量更新设备属性、设置和命令。 本文将引导你了解如何在自己的应用程序中开始使用作业。

> [!NOTE] 
> 目前不支持针对 Azure IoT Edge 设备的作业。 

## <a name="create-and-run-a-job"></a>创建并运行作业

此部分介绍如何创建并运行作业。 其中演示了如何提高多个冷冻食品自动售货机的风扇速度。

1. 从导航窗格中，导航到“作业”。

2. 选择“+ 新建”以创建新作业。 

    ![新建作业](./media/howto-run-a-job/createnewjob.png)

3. 输入用于标识所要创建的作业的名称和说明。

4. 选择要将作业应用到的设备集。 选择设备集后，右侧会填充该设备集内的设备。 如果选择某个已中断的设备集，则不会显示任何设备，而是出现一条消息，指出该设备集已中断。

5. 接下来，选择要定义的作业类型（设置、属性或命令）。 选择所选作业类型旁的 **+** 并添加操作。

    ![配置作业](./media/howto-run-a-job/configurejob.png)

6. 在右侧，选择要对其运行该作业的设备。 选中顶部的复选框会选择整个设备集内的所有设备。 选中“名称”旁边的复选框会选择当前页上的所有设备。 

7. 选择设备后，选择“运行”或“保存”。   该作业随即显示在“作业”主页上。  在此视图上，可以看到当前正在运行的作业，以及以往运行的所有作业的历史记录。 正在运行的作业始终显示在列表顶部。 随时可以再次打开已保存的作业，以继续编辑或运行。

    ![查看作业](./media/howto-run-a-job/viewjob.png)

    > [!NOTE]
    > 可以查看过去最长 30 天运行的作业的历史记录。

8. 若要获取作业的概述，请从列表中选择要查看的作业。 此概述包含作业详细信息、设备和设备状态值。 在此概述中，还可以选择“下载作业详细信息”以下载作业详细信息 .csv 文件，其中包含设备及其状态值。  这些信息可用于故障排除。

    ![查看服务状态](./media/howto-run-a-job/downloaddetails.png)

### <a name="stop-a-running-job"></a>停止正在运行的作业

若要停止正在运行的作业，请选择该作业，然后在面板上选择“停止”。  作业状态将会更改，以反映该作业已停止。

   ![停止作业](./media/howto-run-a-job/stopjob.png)

### <a name="run-a-stopped-job"></a>运行已停止的作业

若要运行当前已停止的作业，请选择该作业。 在面板上选择“运行”。  作业状态将会更改，以反映该作业现已重新运行。

   ![已恢复的作业](./media/howto-run-a-job/resumejob.png)

## <a name="copy-a-job"></a>复制作业

若要复制创建的现有作业，请在“作业”主页中选择该作业，然后选择“复制”。  此时会打开作业配置的新副本供编辑。 可以保存或运行新作业。 如果对所选设备集进行了任何更改，这些更改会反映在此复制作业中供你编辑。

   ![复制作业](./media/howto-run-a-job/copyjob.png)

## <a name="view-the-job-status"></a>查看作业状态

创建作业后，“状态”列将会更新，包含作业的最新状态消息。  下表列出了可能的状态值：

| 状态消息       | 状态的含义                                          |
| -------------------- | ------------------------------------------------------- |
| 已完成            | 此作业已在所有设备上执行。              |
| 已失败               | 此作业失败且未在设备上完全执行。  |
| 挂起              | 此作业尚未在设备上开始执行。         |
| 正在运行              | 此作业当前正在设备上执行。             |
| 已停止              | 此作业已由用户手动停止。           |

状态消息后面是作业中设备的概述。 下表列出了可能的设备状态值：

| 状态消息       | 状态的含义                                                     |
| -------------------- | ------------------------------------------------------------------ |
| 已成功            | 已成功执行该作业的设备数。       |
| 已失败               | 执行作业失败的设备数。       |

### <a name="view-the-device-status"></a>查看设备状态

若要查看作业的状态和所有受影响设备，请选择该作业。 若要下载包含作业详细信息的 .csv 文件（包括设备的列表及其状态值），请选择“下载作业详细信息”。  每个设备名称的旁边显示了以下状态消息之一：

| 状态消息       | 状态的含义                                                                |
| -------------------- | ----------------------------------------------------------------------------- |
| 已完成            | 作业已在此设备上执行。                                     |
| 已失败               | 作业在此设备上执行失败。 错误消息中显示了更多信息。  |
| 挂起              | 作业尚未在此设备上执行。                                   |

> [!NOTE]
> 如果删除了某个设备，则无法选择该设备，它会显示为已删除并附带设备 ID。

## <a name="next-steps"></a>后续步骤

了解如何在 Azure IoT Central 应用程序中创建作业后，接下来请学习：

- [使用设备集](howto-use-device-sets.md)
- [管理设备](howto-manage-devices.md)
- [对设备模板进行版本控制](howto-version-device-template.md)
